---
author: GedRelay
Email: gedrelay@stu.jnu.edu.cn
title: æ±‡æ€»
time: 2024-09-08 23:27
aliases: 
Description: 
tags: 
lastEdit: 2024-10-04-15:41
---

```toc
style: number
max_depth: 3
```


# æ‰€æœ‰æ ‡ç­¾
```dataviewjs
// æŒ‡å®šæ–‡ä»¶å¤¹ è¿™é‡Œæ”¹æˆ ğŸ‘‡ ä½ çš„æ–‡ä»¶å¤¹å
const filter = `"å­¦ä¹ ç¬”è®°/ç®—æ³•é¢˜/ç®—æ³•é¢˜æ±‡æ€»"`;

// è·å–æ‰€æœ‰tags
let tags = [];
dv.pages(filter).map(p=>p.file.tags.values.forEach(tag=>tags.push(tag)));
// å»é‡
tags = [...new Set(tags)];
// æŒ‰åµŒå‰ç¼€æ’åº
const sortByPrefix = (arr) => {
    return arr.sort((a, b) => {
        // åˆ†å‰²å­—ç¬¦ä¸²è·å–å‰ç¼€
        const prefixA = a.split('/')[0];
        const prefixB = b.split('/')[0];
        
        // æ¯”è¾ƒå‰ç¼€
        if (prefixA !== prefixB) {
            return prefixA.localeCompare(prefixB); // æŒ‰ç…§å‰ç¼€å­—æ¯é¡ºåºæ’åº
        } else {
            // å¦‚æœå‰ç¼€ç›¸åŒï¼Œåˆ™æ¯”è¾ƒæ•´ä¸ªå­—ç¬¦ä¸²
            return a.localeCompare(b);
        }
    });
}
// æŒ‰å‰ç¼€æ’åº
tags = sortByPrefix(tags);

// è¾“å‡ºæ ‡ç­¾å†…å®¹
let content = "";
let lastTagPrefix = "";
tags.forEach(item => {
	const itemPrefix = item.split("/")[0];
	if(itemPrefix !== lastTagPrefix){
	    if(lastTagPrefix !== "") content += "\n\n";
		lastTagPrefix = itemPrefix;
	}
	content += item + " ";
});
dv.el("div", content);
```

# æŸ¥è¯¢æ¨¡æ¿

```
table without id

file.link as "é¢˜ç›®",
regexreplace(file.folder, "[.+/]?.+/", "") as "å¹³å°",
file.tags as "æ ‡ç­¾"

from "å­¦ä¹ ç¬”è®°/ç®—æ³•é¢˜/ç®—æ³•é¢˜æ±‡æ€»" and #åŒæŒ‡é’ˆ

sort file.mtime desc
```



```dataview
table without id

file.link as "é¢˜ç›®",
regexreplace(file.folder, "[.+/]?.+/", "") as "å¹³å°",
file.tags as "æ ‡ç­¾"

from "å­¦ä¹ ç¬”è®°/ç®—æ³•é¢˜/ç®—æ³•é¢˜æ±‡æ€»" and #åŠ¨æ€è§„åˆ’ 

sort file.mtime desc
```



